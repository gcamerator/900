import fetch from 'node-fetch';
import * as cheerio from 'cheerio';
import moment from 'moment';
const leagueEmojis = [
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ', emoji: 'ðŸ‡«ðŸ‡·' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²', emoji: 'ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿' },
  { league: 'ÙƒØ£Ø³ Ø±Ø§Ø¨Ø·Ø© Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ', emoji: 'ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ', emoji: 'ðŸ‡®ðŸ‡¹' },
  { league: 'ÙƒØ£Ø³ Ø¥ÙŠØ·Ø§Ù„ÙŠØ§', emoji: 'ðŸ‡®ðŸ‡¹' },
  { league: 'ÙƒØ£Ø³ Ø£Ù„Ù…Ø§Ù†ÙŠØ§', emoji: 'ðŸ‡©ðŸ‡ª' },
  { league: 'ÙƒØ£Ø³ ÙØ±Ù†Ø³Ø§', emoji: 'ðŸ‡«ðŸ‡·' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ', emoji: 'ðŸ‡ªðŸ‡¸' },
  { league: 'ÙƒØ£Ø³ Ù…Ù„Ùƒ Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§', emoji: 'ðŸ‡ªðŸ‡¸' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠ', emoji: 'ðŸ‡©ðŸ‡ª' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù‡ÙˆÙ„Ù†Ø¯ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²', emoji: 'ðŸ‡³ðŸ‡±' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù‡ÙˆÙ„Ù†Ø¯ÙŠ', emoji: 'ðŸ‡³ðŸ‡±' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ø±ØªØºØ§Ù„ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²', emoji: 'ðŸ‡µðŸ‡¹' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø¨Ø±ØªØºØ§Ù„', emoji: 'ðŸ‡µðŸ‡¹' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ØªØ±ÙƒÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²', emoji: 'ðŸ‡¹ðŸ‡·' },
  { league: 'ÙƒØ£Ø³ ØªØ±ÙƒÙŠØ§', emoji: 'ðŸ‡¹ðŸ‡·' },
  { league: 'Ø¯ÙˆØ±ÙŠ Ø£Ø¨Ø·Ø§Ù„ Ø£ÙˆØ±ÙˆØ¨Ø§', emoji: 'ðŸ‡ªðŸ‡º' },
  { league: 'ÙƒØ£Ø³ Ø£Ù…Ù… Ø£ÙˆØ±ÙˆØ¨Ø§ ÙŠÙˆØ±Ùˆ', emoji: 'ðŸ‡ªðŸ‡º' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£ÙˆØ±ÙˆØ¨ÙŠ', emoji: 'ðŸ‡ªðŸ‡º' },
  { league: 'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…Ø¤ØªÙ…Ø± Ø§Ù„Ø£ÙˆØ±ÙˆØ¨ÙŠ', emoji: 'ðŸ‡ªðŸ‡º' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… Ù„Ù„Ù†Ø§Ø´Ø¦ÙŠÙ† ØªØ­Øª 17 Ø³Ù†Ø©', emoji: 'ðŸ†' },
  { league: 'ØªØµÙÙŠØ§Øª Ø£Ù…Ù… Ø£ÙˆØ±ÙˆØ¨Ø§', emoji: 'ðŸ‡ªðŸ‡º' },
  { league: 'ØªØµÙÙŠØ§Øª ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©', emoji: 'ðŸŒŽ' },
  { league: 'ÙƒÙˆØ¨Ø§ Ø£Ù…Ø±ÙŠÙƒØ§', emoji: 'ðŸŒŽ' },
  { league: 'ØªØµÙÙŠØ§Øª ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… Ø¢Ø³ÙŠØ§', emoji: 'ðŸŒ' },
  { league: 'ÙƒØ£Ø³ Ø¢Ø³ÙŠØ§', emoji: 'ðŸŒ' },
  { league: 'ÙƒØ£Ø³ Ø¢Ø³ÙŠØ§ ØªØ­Øª 23 Ø³Ù†Ø©', emoji: 'ðŸŒ' },
  { league: 'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ† Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ', emoji: 'ðŸ‡¦ðŸ‡ª' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ† Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ', emoji: 'ðŸ‡¦ðŸ‡ª' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…ØºØ±Ø¨ÙŠ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ  Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„Ø¥Ø­ØªØ±Ø§ÙÙŠØ©', emoji: 'ðŸ‡²ðŸ‡¦' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…ØºØ±Ø¨ÙŠ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„Ø¥Ø­ØªØ±Ø§ÙÙŠØ©', emoji: 'ðŸ‡²ðŸ‡¦' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø¹Ø±Ø´ Ø§Ù„Ù…ØºØ±Ø¨ÙŠ', emoji: 'ðŸ‡²ðŸ‡¦' },
  { league: 'Ù…Ø¨Ø§Ø±ÙŠØ§Øª ÙˆØ¯ÙŠØ©', emoji: 'ðŸ‡ºðŸ‡³' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ù…Ø§Ù†ÙŠØ§', emoji: 'ðŸ‡©ðŸ‡ª' },
  { league: 'ÙˆØ¯ÙŠØ§Øª Ù…Ù†ØªØ®Ø¨Ø§Øª', emoji: 'ðŸ‡§ðŸ‡±' },
  { league: 'ÙˆØ¯ÙŠØ§Øª Ù…Ù†ØªØ®Ø¨Ø§Øª ØªØ­Øª 23', emoji: 'ðŸ‡§ðŸ‡±' },
  { league: 'ÙˆØ¯ÙŠØ§Øª Ø£Ù†Ø¯ÙŠØ©', emoji: 'ðŸ‡§ðŸ‡±' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠ', emoji: 'ðŸ‡§ðŸ‡ª' },
  { league: 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ†', emoji: 'ðŸ‡¸ðŸ‡¦' },
  { league: 'ØªØµÙÙŠØ§Øª Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ© Ù„ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù…', emoji: 'ðŸŒŽ' },
  { league: 'Ø¯ÙˆØ±ÙŠ Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„ÙƒÙˆÙ†ÙƒØ§ÙƒØ§Ù', emoji: 'ðŸŒŽ' },
  { league: 'ÙƒÙˆØ¨Ø§ Ù„ÙŠØ¨Ø±ØªØ§Ø¯ÙˆØ±ÙŠØ³', emoji: 'ðŸŒŽ' },
  { league: 'ØªØµÙÙŠØ§Øª Ø¢Ø³ÙŠØ§ Ù„ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù…', emoji: 'ðŸŒ' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ', emoji: 'ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø±Ø§Ø¨Ø·Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ†', emoji: 'ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿'},
  { league: 'ÙƒØ£Ø³ Ø±Ø§Ø¨Ø·Ø© Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ EFL', emoji: 'ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿'},
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠ', emoji: 'ðŸŒ' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø³ÙˆØ¨Ø± Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ', emoji: 'ðŸ‡ªðŸ‡¸' },
  { league: 'Ø¯ÙˆØ±ÙŠ Ø£Ø¨Ø·Ø§Ù„ Ø¢Ø³ÙŠØ§', emoji: 'ðŸŒ' },
  { league: 'ÙƒØ£Ø³ Ø£Ù…Ù… Ø£ÙØ±ÙŠÙ‚ÙŠØ§', emoji: 'ðŸŒ' },
  { league: 'ØªØµÙÙŠØ§Øª ÙƒØ£Ø³ Ø£Ù…Ù… Ø§ÙØ±ÙŠÙ‚ÙŠØ§', emoji: 'ðŸŒ' },
  { league: 'ØªØµÙÙŠØ§Øª ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… Ø£ÙØ±ÙŠÙ‚ÙŠØ§', emoji: 'ðŸŒ' },
  { league: 'Ø¯ÙˆØ±ÙŠ Ø£Ø¨Ø·Ø§Ù„ Ø£ÙØ±ÙŠÙ‚ÙŠØ§', emoji: 'ðŸŒ' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø£ÙØ±ÙŠÙ‚ÙŠ', emoji: 'ðŸŒ' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„ÙƒÙˆÙ†ÙØ¯Ø±Ø§Ù„ÙŠØ© Ø§Ù„Ø£ÙØ±ÙŠÙ‚ÙŠØ©', emoji: 'ðŸŒ' },
  { league: 'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³ÙˆØ¨Ø± Ø§Ù„Ø£ÙØ±ÙŠÙ‚ÙŠ', emoji: 'ðŸŒ' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø³ÙˆØ¨Ø± Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†ÙŠ', emoji: 'ðŸ‡¦ðŸ‡·' },
  { league: 'ÙƒØ£Ø³ Ø§Ù„Ø£Ù…ÙŠØ± Ù‚Ø·Ø±', emoji: 'ðŸ‡¶ðŸ‡¦' },
];

const handler = async (m, { conn }) => {
let command = m.text.toLowerCase();
  let excludedLeagues;
if (['kora', 'koray', 'koray', 'koran', '.kora', '.koray', '.koray', '.koran'].includes(command)) {
 excludedLeagues = [ 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙƒÙ†Ø¯ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',
  'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø±Ø¯ÙŠÙ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙƒÙˆØ±ÙŠ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ MLS',  'ÙƒÙˆØ¨Ø§ Ø³ÙˆØ¯ Ø£Ù…Ø±ÙŠÙƒØ§Ù†Ø§',  'ÙƒØ£Ø³ Ø§Ù„Ø®Ù„ÙŠØ¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ',  'Ø¨Ø·ÙˆÙ„Ø© Ø¨Ø§ÙˆÙ„ÙŠØ³ØªØ§ Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù„ÙŠØ¨ÙŠØ±ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ØµÙŠÙ†ÙŠ Ø³ÙˆØ¨Ø±',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£ÙˆØ²Ø¨ÙƒÙŠ Ø³ÙˆØ¨Ø±',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù‚Ø·Ø±ÙŠ Ù†Ø¬ÙˆÙ… Ù‚Ø·Ø±',  'ÙƒØ£Ø³ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø© Ø§Ù„Ù…ÙØªÙˆØ­Ø©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø±ÙˆØ³ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù„ÙŠØ¨ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'ÙƒØ£Ø³ Ø§Ù„Ø±Ø§Ø¨Ø·Ø© Ø§Ù„Ù…ØµØ±ÙŠØ©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙƒÙˆÙŠØªÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ Ù†Ø¬ÙˆÙ…',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ù„Ù„Ø³ÙŠØ¯Ø§Øª Ø³ÙˆØ¨Ø±',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ Ù„Ù„Ø³ÙŠØ¯Ø§Øª',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ù†ÙŠ Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ†',  'ØªØ´Ø§Ù…Ø¨ÙŠÙˆÙ†Ø´ÙŠØ¨ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ù„Ù„Ø³ÙŠØ¯Ø§Øª Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ù„Ù„Ù†Ø§Ø´Ø¦ÙŠÙ† ØªØ­Øª 17 Ø³Ù†Ø©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ØªÙˆÙ†Ø³ÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·Ø© Ø§Ù„Ù…Ø­ØªØ±ÙØ© Ø§Ù„Ø£ÙˆÙ„Ù‰',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù†Ø±ÙˆÙŠØ¬ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…Ø§Ù„ÙŠØ²ÙŠ Ø§Ù„Ø³ÙˆØ¨Ø±',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù†Ù…Ø³Ø§ÙˆÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨ÙˆÙ„Ù†Ø¯ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ØªØ´ÙŠÙƒÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£ÙˆÙƒØ±Ø§Ù†ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²', 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ø±ØªØºØ§Ù„ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©', 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ØµØ±Ø¨ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'ÙƒØ£Ø³ QSL Ø§Ù„Ù‚Ø·Ø±ÙŠØ© Ooredoo',  'ÙƒØ£Ø³ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…Ø¬Ø±ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ØªÙˆÙ†Ø³ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·Ø© Ø§Ù„Ù…Ø­ØªØ±ÙØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙƒØ±ÙˆØ§ØªÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©', 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© B',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ù„Ù„Ø´Ø¨Ø§Ø¨ ØªØ­Øª 19 Ø³Ù†Ø©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ø³ØªØ±Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© A',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…ÙƒØ³ÙŠÙƒÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³ÙˆÙŠØ¯ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù‡ÙˆÙ„Ù†Ø¯ÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙŠÙˆÙ†Ø§Ù†ÙŠ Ø§Ù„Ø³ÙˆØ¨Ø±',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¯Ù†Ù…Ø§Ø±ÙƒÙŠ Ø§Ù„Ø³ÙˆØ¨Ø±',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³ÙˆÙŠØ³Ø±ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø³ÙƒØªÙ„Ù†Ø¯ÙŠ Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ†',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ø£)',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø§Ø³Ø¨Ø§Ù†ÙŠ - Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©',  'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ† Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù„Ø¨Ù†Ø§Ù†ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ù…Ø¨Ø§Ø±ÙŠØ§Øª ÙˆØ¯ÙŠØ© -  Ø£Ù†Ø¯ÙŠØ©',  'Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† - ÙƒØ§Ø³ Ø§Ù„Ù…Ù„Ùƒ',  'ÙƒØ£Ø³ Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠ Ù„Ù„Ø£Ù†Ø¯ÙŠØ©',  'Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø¢Ø³ÙŠÙˆÙŠØ© - ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„ÙŠ',  'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© 2 Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ',  'Ø¯ÙˆØ±ÙŠ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ù…Ø§Ù† Ø¯. Ø£ÙˆÙ„Ù‰',  'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø´Ø¨Ø§Ø¨ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ',  'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ ÙŠÙ„Ùˆ',  'Ø¯ÙˆØ±ÙŠ Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§',  'Ø¯ÙˆØ±ÙŠ Ø£Ø¨Ø·Ø§Ù„ Ø£ÙˆØ±ÙˆØ¨Ø§ Ù„Ù„Ø´Ø¨Ø§Ø¨',  'Ù„ÙŠØ³ÙˆØªÙˆ - Ø¯ÙˆØ±ÙŠ Ù„ÙŠØ³ÙˆØªÙˆ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø§Ù„ÙƒÙˆÙŠØªÙŠ',  'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø§Ù„ØªÙˆÙ†Ø³ÙŠ',  'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ',  'Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø§Ù„Ù‚Ø·Ø±ÙŠ', 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†ÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙŠÙ…Ù†ÙŠ', 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù„ÙŠØ¨ÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³ÙˆØ±ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø¯ÙˆØ±ÙŠ Ù†Ø¬ÙˆÙ… Ù‚Ø·Ø±',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ',  'ÙƒØ£Ø³ Ø®Ø§Ø¯Ù… Ø§Ù„Ø­Ø±Ù…ÙŠÙ† Ø§Ù„Ø´Ø±ÙŠÙÙŠÙ†',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ†',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙƒÙˆÙŠØªÙŠ', 'ÙƒØ£Ø³ ØªØ±ÙƒÙŠØ§',  'ÙƒØ£Ø³ Ø§Ù„Ø£Ø±Ø¯Ù†',  'ÙˆØ¯ÙŠØ§Øª Ø£Ù†Ø¯ÙŠØ© (3)',  'ÙƒØ£Ø³ Ù…ØµØ±',  'ÙƒØ£Ø³ Ø§Ù„ÙŠÙˆÙ†Ø§Ù†',  'ÙƒØ£Ø³ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±',  'ÙƒØ£Ø³ Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†',  'ÙƒØ£Ø³ Ø¥ÙŠØ±Ø§Ù† Ø­Ø°ÙÙŠ',  'ÙƒØ£Ø³ Ø§Ø³ÙƒØªÙ„Ù†Ø¯Ø§',  'ÙƒØ£Ø³ Ø±ÙˆØ³ÙŠØ§',  'ÙƒØ£Ø³ Ø§Ù„Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ',  'ÙƒØ£Ø³ Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ØªÙˆÙ†Ø³ÙŠ',  'ÙƒØ£Ø³ Ø±Ø§Ø¨Ø·Ø© Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø§Ø±Ø¬Ù†ØªÙŠÙ†ÙŠ',  'ÙƒØ£Ø³ ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯ Ø§Ù„ÙƒÙˆÙŠØªÙŠ',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ Ù„Ù„Ø³ÙŠØ¯Ø§Øª NWSL',
  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£Ø±Ø¯Ù†ÙŠ Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ†',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø±ÙˆÙ…Ø§Ù†ÙŠ Ø³ÙˆØ¨Ø±',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø±ÙˆÙ…Ø§Ù†ÙŠ Ø³ÙˆØ¨Ø±',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³Ù„ÙˆÙÙŠÙ†ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ù„ØºØ§Ø±ÙŠ Ø§Ù„Ø£ÙˆÙ„',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ØªØ§ÙŠÙ„Ù†Ø¯ÙŠ',  'ÙƒØ£Ø³ ØªÙˆÙ†Ø³',  'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø£ÙˆØ±ÙˆØºÙˆØ§ÙŠØ§Ù†ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²', 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„ÙÙŠØªÙ†Ø§Ù…ÙŠ',  'Ø¯ÙˆØ±ÙŠ Ø£Ø¨Ø·Ø§Ù„ Ø£ÙˆÙ‚ÙŠØ§Ù†ÙˆØ³ÙŠØ§', 'Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø¨Ù„ØºØ§Ø±ÙŠ Ø§Ù„Ø£ÙˆÙ„', 'ÙƒØ£Ø³ Ø§Ù„Ø£Ù…ÙŠØ± Ø§Ù„ÙƒÙˆÙŠØªÙŠ', ];
} else {  excludedLeagues = []}

  const getLiveMatches = async (command) => {
    let kurl, txtx;
    switch (command) {
      case 'kora': case 'koraa': case '.kora':
        kurl = 'https://jdwel.com/today/';
        txtx = '*Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…* :\nâ€â–¬â–¬â–¬â–¬â–¬â–¬';
        break;
      case 'korat': case 'korata': case '.korta':
        kurl = 'https://jdwel.com/tomorrow/';
        txtx = '*Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ØºØ¯* :\nâ€â–¬â–¬â–¬â–¬â–¬â–¬';
        break;
      case 'koray': case 'koraya': case '.koray':
        kurl = 'https://jdwel.com/yesterday/';
        txtx = '*Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø£Ù…Ø³* :\nâ€â–¬â–¬â–¬â–¬â–¬â–¬';
        break;
      case 'koran': case 'korana': case '.koran':
        kurl = 'https://jdwel.com/today/';
        txtx = '*Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø£Ù†* :\nâ€â–¬â–¬â–¬â–¬â–¬\n';
        break;
      default:
        return; // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ØŒ ÙŠØªÙ… Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ø¯Ø§Ù„Ø©
    }

    const url = kurl;
    try {
      const response = await fetch(url);
      const html = await response.text();
      const $ = cheerio.load(html);
      const matchesInfo = [];
      let currentLeague = '';

      matchesInfo.push(`${txtx}`);
      $('ul.comp_matches_list.matches_list').each((index, element) => {
        const leagueName = $(element).find('.comp_separator.container .main h4').text().trim().replace(/ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§ÙˆÙ„Ù‰/g, '').replace(/ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰/g, '').replace('ÙƒØ£Ø³ Ø¢Ø³ÙŠØ§ ØªØ­Øª 23 Ø³Ù†Ø©', 'ðŸŒ ÙƒØ£Ø³ Ø¢Ø³ÙŠØ§ ØªØ­Øª 23 Ø³Ù†Ø©');
        const leagueMatches = $(element).find('.single_match');

        if (excludedLeagues.includes(leagueName)) {
          return;
        }
        if (leagueName !== currentLeague) {
          currentLeague = leagueName;
          const getLeagueEmoji = (leagueName) => {
            const match = leagueEmojis.find((item) => item.league === leagueName);
            return match ? match.emoji : 'â€';
          };
          const leagueEmoji = getLeagueEmoji(currentLeague);
          if (command !== 'koran' & command !== '.koran' && command !== 'korana') {
            matchesInfo.push(`\n*${leagueEmoji} ${currentLeague}â€Ž*\nâ€â•â•â•â•â•â• â‹†â˜…â‹† â•â•â•â•â•â•`);
          }
        }
        leagueMatches.each((index, matchElement) => {
          const teamA = $(matchElement).find('.team.hometeam span.the_team').text().trim();
          const teamB = $(matchElement).find('.team.awayteam span.the_team').text().trim();
          const dateTime = $(matchElement).find('.middle_column.cell.col-2 .match_time .the_otime').text();
          const time = moment(dateTime).subtract(2, 'hours').format('HH:mm');
          const liveStatus = $(matchElement).find('.match_status');
          const matchStatusText = liveStatus.find('span').text().trim().replace(/Ø¨ÙŠÙ† Ø§Ù„Ø´ÙˆØ·ÙŠÙ†/g, 'Â½').replace(/Ø§Ù†ØªÙ‡Øª/g, 'âœ…').replace(/'/g, '"').replace(/ØªØ¨Ø¯Ø£ Ù‚Ø±ÙŠØ¨Ø§Ù‹/g, 'â³').replace(/Ø£Ù„ØºÙŠØª/g, 'âŒ')
          const matchStatus = '"' + matchStatusText.split('"')[0];
          const mst = matchStatus.replace(/"Â½/g, 'Â½').replace(/"âœ…/g, 'âœ…').replace(/""/g, '"').replace(/"â³/g, 'â³').replace(/"âŒ/g, 'âŒ');
          const matchScore = $(matchElement).find('.match_score');
          const homeTeamScore = matchScore.find('.hometeam').text();
          const awayTeamScore = matchScore.find('.awayteam').text();
          let liveScore = `${homeTeamScore} - ${awayTeamScore}`;
          let matchResult = ``;
          if (command === 'koran') {
            if (matchStatusText.includes('"')) {
              matchResult += `â€ã€ *${teamA}* *${liveScore}* *${teamB}* ã€‘${mst}\n`;
            } else {
              return;
            }
          } else {
            if (command !== 'koran' && liveStatus.text().includes('Ø¨Ø¯Ø£Øª')) {
              matchResult += `â€ã€ *${teamA}* âœ˜ *${teamB}* ã€‘${time}\n`;
            } else {
              matchResult += `â€ã€ *${teamA}* *${liveScore}* *${teamB}* ã€‘${mst}\n`;
            }
          }

          matchesInfo.push(matchResult);
        });
      });

      return matchesInfo;
    } catch (error) {
      console.error('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹:', error);
      return null;
    }
  };
//
  try {
    const matchesInfo = await getLiveMatches(command);
    if (matchesInfo && matchesInfo.length > 0) {
      const replyMessage = matchesInfo.join('\n');
      conn.reply(m.chat, replyMessage, m);
    } else {
      conn.reply(m.chat, 'Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ù…Ù„Ø¹ÙˆØ¨Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.');
    }
  } catch (error) {
    console.error('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª:', error);
  }
};

handler.customPrefix = /^(.kora|.koray|.koran|.korat|kora|koray|koran|korat|koraa|koraya|korana|korata)$/i;
handler.command = new RegExp;
export default handler;
